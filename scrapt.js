// Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª (Ø«Ù†Ø§Ø¦ÙŠ Ø§Ù„Ù„ØºØ© Ù„ÙƒÙ„ Ù†ØµÙˆØµ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©)
const translations = {
  en: {
    home: "Home",
    services: "Services",
    features: "Features",
    marketing: "Marketing",
    bookNow: "All Eyes On You ğŸ‘‹",
    heroTitle:
      'Building Digital <span class="has-before">Marketing</span>, Brand and Experience',
    heroText:
      "At Dream Media, we specialize in marketing, brand building, training, and consulting, delivering efficient and impactful solutions.",

    // Services
    servicesSubtitle: "Our Services",
    servicesTitle:
      'Managing your business with our <span class="has-before">best service</span>',
    serviceProductManagement: "Product Management",
    serviceWebMobile: "Web & Mobile Development",
    serviceMarketing: "Marketing",
    serviceBusinessTraining: "Business training",
    servicePrinting: "Printing",
    serviceMarketingCommunication: "Marketing and Communication",
    serviceBusinessDevelopment: "Business Development",
    serviceMoreLink: "04 More Service",

    // Feature
    featureSubtitle: "Why Choose Dream Media",
    featureTitle:
      'Experts in Marketing, Training, and Business Consulting, Solving Client <span class="has-before">Challenges</span>',
    featureFastTitle: "Fast working process",
    featureFastText:
      "At Dream Media we specialize in marketing, building brands for agencies, and social media design.",
    featureTeamTitle: "Dedicated team",
    featureTeamText:
      "At Dream Media, our team works closely with you to build an effective and integrated marketing strategy.",
    featureSupportTitle: "24/7 hours support",
    featureSupportText:
      "We provide ongoing support and consulting to ensure campaign success and continuous improvement.",

    // Marketing slider
    marketingSubtitle: "Our Work",
    marketingTitle: 'Featured <span class="has-before">Projects</span>',
    marketingButton: "View Project",

    // Partners
    partnersSubtitle: "Our Partners",
    partnersTitle: 'Trusted by Leading <span class="has-before">Companies</span>',

    // Footer
    footerAboutTitle: "About Dream media",
    footerAboutText:
      "Baghdad-based marketing and business solutions company specializing in digital marketing, social media management, video production, printing, and training. We help businesses and organizations grow and build a strong presence through creative strategies and measurable results.",
    footerInstagramTitle: "Instagram post",
    footerCopyright: "Â© 2024 Dream Media.",

    // Floating contact
    contactWhatsApp: "WhatsApp",
    contactEmail: "Email",
    contactPhone: "Phone"
  },

  ar: {
    home: "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
    services: "Ø§Ù„Ø®Ø¯Ù…Ø§Øª",
    features: "Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª",
    marketing: "Ø§Ù„ØªØ³ÙˆÙŠÙ‚",
    blog: "Ø§Ù„Ù…Ø¯ÙˆÙ†Ø©",
    bookNow: "ÙƒÙ„ Ø§Ù„Ø£Ù†Ø¸Ø§Ø± Ø¹Ù„ÙŠÙƒ ğŸ‘‹",
    heroTitle:
      'Ù†Ø¨Ù†ÙŠ <span class="has-before">Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ø±Ù‚Ù…ÙŠ</span>ØŒ Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ© ÙˆØ§Ù„ØªØ¬Ø±Ø¨Ø©',

    heroText:
      "ÙÙŠ Ø¯Ø±ÙŠÙ… Ù…ÙŠØ¯ÙŠØ§ Ù†Ø®ØªØµ ÙÙŠ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ ÙˆØ¨Ù†Ø§Ø¡ Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ© ÙˆØ§Ù„ØªØ¯Ø±ÙŠØ¨ ÙˆØ§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø§Øª Ù„Ù†Ù‚Ø¯Ù‘Ù… Ø­Ù„ÙˆÙ„Ù‹Ø§ ÙØ¹Ù‘Ø§Ù„Ø© ÙˆÙ…Ø¤Ø«Ø±Ø©.",

    // Services
    servicesSubtitle: "Ø®Ø¯Ù…Ø§ØªÙ†Ø§",
    servicesTitle:
      'Ù†Ø¯ÙŠØ± Ø£Ø¹Ù…Ø§Ù„Ùƒ Ù…Ù† Ø®Ù„Ø§Ù„ <span class="has-before">Ø£ÙØ¶Ù„ Ø§Ù„Ø®Ø¯Ù…Ø§Øª</span>',
    serviceProductManagement: "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",
    serviceWebMobile: "ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ ÙˆØ§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª",
    serviceMarketing: "Ø§Ù„ØªØ³ÙˆÙŠÙ‚",
    serviceBusinessTraining: "ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„",
    servicePrinting: "Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© ÙˆØ§Ù„Ø¥Ù†ØªØ§Ø¬",
    serviceMarketingCommunication: "Ø§Ù„ØªØ³ÙˆÙŠÙ‚ ÙˆØ§Ù„Ø§ØªØµØ§Ù„",
    serviceBusinessDevelopment: "ØªØ·ÙˆÙŠØ± Ø§Ù„Ø£Ø¹Ù…Ø§Ù„",
    serviceMoreLink: "Ø®Ø¯Ù…Ø§Øª Ø£Ø®Ø±Ù‰",

    // Feature
    featureSubtitle: "Ù„Ù…Ø§Ø°Ø§ ØªØ®ØªØ§Ø± Ø¯Ø±ÙŠÙ… Ù…ÙŠØ¯ÙŠØ§ØŸ",
    featureTitle:
      'Ø®Ø¨Ø±Ø§Ø¡ ÙÙŠ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ ÙˆØ§Ù„ØªØ¯Ø±ÙŠØ¨ ÙˆØ§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø§Øª Ù„Ù†Ø­Ù„ <span class="has-before">ØªØ­Ø¯ÙŠØ§Øª Ø¹Ù…Ù„Ø§Ø¦Ùƒ</span>',
    featureFastTitle: "Ø³Ø±Ø¹Ø© ÙÙŠ Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ø¹Ù…Ù„",
    featureFastText:
      "Ù†ÙˆÙÙ‘Ø± Ø®Ø·Ø·Ù‹Ø§ Ù…Ø±Ù†Ø© ÙˆØ³Ø±ÙŠØ¹Ø© Ù„Ù„ØªØ³ÙˆÙŠÙ‚ ÙˆØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ÙˆØ¨Ù†Ø§Ø¡ Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ø¨ØµØ±ÙŠØ© Ø¨Ù…Ø§ ÙŠÙ†Ø§Ø³Ø¨ Ø·Ø¨ÙŠØ¹Ø© Ø¹Ù…Ù„Ùƒ.",
    featureTeamTitle: "ÙØ±ÙŠÙ‚ Ù…Ø®ØµØµ Ù„Ù†Ø¬Ø§Ø­Ùƒ",
    featureTeamText:
      "ÙØ±ÙŠÙ‚ Ø¯Ø±ÙŠÙ… Ù…ÙŠØ¯ÙŠØ§ ÙŠØ¹Ù…Ù„ Ù…Ø¹Ùƒ Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ© Ù„Ø¨Ù†Ø§Ø¡ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© ØªØ³ÙˆÙŠÙ‚ Ù…ØªÙƒØ§Ù…Ù„Ø© ÙˆÙØ¹Ù‘Ø§Ù„Ø©.",
    featureSupportTitle: "Ø¯Ø¹Ù… Ù…ØªÙˆØ§ØµÙ„ 24/7",
    featureSupportText:
      "Ù†Ù‚Ø¯Ù‘Ù… Ø¯Ø¹Ù…Ù‹Ø§ ÙˆØ§Ø³ØªØ´Ø§Ø±Ø§Øª Ù…Ø³ØªÙ…Ø±Ø© Ù„Ø¶Ù…Ø§Ù† Ø§Ø³ØªÙ…Ø±Ø§Ø± Ù†Ø¬Ø§Ø­ Ø§Ù„Ø­Ù…Ù„Ø§Øª Ø§Ù„ØªØ³ÙˆÙŠÙ‚ÙŠØ© ÙˆØªØ­Ø³ÙŠÙ† Ø§Ù„Ù†ØªØ§Ø¦Ø¬.",

    // Marketing slider
    marketingSubtitle: "Ø£Ø¹Ù…Ø§Ù„Ù†Ø§",
    marketingTitle: 'Ø£Ø¨Ø±Ø² <span class="has-before">Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</span>',
    marketingButton: "Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹",

    // Partners
    partnersSubtitle: "Ø´Ø±ÙƒØ§Ø¤Ù†Ø§",
    partnersTitle: 'Ù…ÙˆØ«ÙˆÙ‚ Ø¨Ù‡ Ù…Ù† Ù‚Ø¨Ù„ <span class="has-before">Ø´Ø±ÙƒØ§Øª Ø±Ø§Ø¦Ø¯Ø©</span>',

    // Footer
    footerAboutTitle: "Ø¹Ù† Ø¯Ø±ÙŠÙ… Ù…ÙŠØ¯ÙŠØ§",
    footerAboutText:
      "Ø´Ø±ÙƒØ© Ø­Ù„ÙˆÙ„ ØªØ³ÙˆÙŠÙ‚ÙŠØ© ÙˆØªØ¬Ø§Ø±ÙŠØ© Ù…Ù‚Ø±Ù‘Ù‡Ø§ Ø¨ØºØ¯Ø§Ø¯ØŒ Ù…ØªØ®ØµØµØ© ÙÙŠ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ø±Ù‚Ù…ÙŠØŒ Ø¥Ø¯Ø§Ø±Ø© Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØŒ Ø¥Ù†ØªØ§Ø¬ Ø§Ù„ÙÙŠØ¯ÙŠÙˆØŒ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©ØŒ ÙˆØ§Ù„ØªØ¯Ø±ÙŠØ¨. Ù†Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø´Ø±ÙƒØ§Øª ÙˆØ§Ù„Ù…Ø¤Ø³Ø³Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ù†Ù…Ùˆ ÙˆØ¨Ù†Ø§Ø¡ Ø­Ø¶ÙˆØ± Ù‚ÙˆÙŠ Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© ÙˆÙ†ØªØ§Ø¦Ø¬ Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ù‚ÙŠØ§Ø³.",
    footerInstagramTitle: "Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø¥Ù†Ø³ØªØºØ±Ø§Ù…",
    footerCopyright: "Â© 2024 Ø¯Ø±ÙŠÙ… Ù…ÙŠØ¯ÙŠØ§.",

    // Floating contact
    contactWhatsApp: "ÙˆØ§ØªØ³Ø§Ø¨",
    contactEmail: "Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",
    contactPhone: "Ø§ØªØµØ§Ù„"
  }
};

const langToggleBtn = document.getElementById("lang-toggle-btn");
const htmlTag = document.documentElement;

// Ø§Ù„Ù„ØºØ© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©: Ø¹Ø±Ø¨ÙŠ
let currentLang = localStorage.getItem("lang") || "ar";

// Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø­Ø³Ø¨ Ø§Ù„Ù„ØºØ©
function updateContent(lang) {
  // Ø¶Ø¨Ø· Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ØµÙØ­Ø©
  htmlTag.lang = lang;
  htmlTag.dir = lang === "ar" ? "rtl" : "ltr";

  // Ø²Ø± Ø§Ù„Ù„ØºØ© (AR / EN)
  if (langToggleBtn) {
    langToggleBtn.textContent = lang === "ar" ? "EN" : "AR";
  }

  // ====== Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Navbar) ======
  const navHome = document.querySelector('[data-nav-link][href="#home"]');
  const navService = document.querySelector('[data-nav-link][href="#service"]');
  const navFeature = document.querySelector('[data-nav-link][href="#feature"]');
  const navProject = document.querySelector('[data-nav-link][href="#project"]');
  const navBlog = document.querySelector('[data-nav-link][href="#blog"]');

  if (navHome) navHome.textContent = translations[lang].home;
  if (navService) navService.textContent = translations[lang].services;
  if (navFeature) navFeature.textContent = translations[lang].features;
  if (navProject) navProject.textContent = translations[lang].marketing;
  if (navBlog) navBlog.textContent = translations[lang].blog;

  // Ø²Ø± "All Eyes On You"
  const bookBtn = document.querySelector(".btn-primary.has-before.has-after");
  if (bookBtn) bookBtn.textContent = translations[lang].bookNow;

  // ====== Ù‚Ø³Ù… Ø§Ù„Ù€ Hero ======
  const heroHeading = document.getElementById("hero-heading");
  if (heroHeading) {
    heroHeading.innerHTML = translations[lang].heroTitle;
  }

  const heroTextEl = document.querySelector(".hero-text");
  if (heroTextEl && translations[lang].heroText) {
    heroTextEl.textContent = translations[lang].heroText;
  }

  // ====== Ù‚Ø³Ù… Ø§Ù„Ø®Ø¯Ù…Ø§Øª (#service) ======
  const serviceSection = document.getElementById("service");
  if (serviceSection) {
    const serviceSubtitle = serviceSection.querySelector(".section-subtitle");
    const serviceTitle = serviceSection.querySelector(".section-title");

    if (serviceSubtitle && translations[lang].servicesSubtitle) {
      serviceSubtitle.textContent = translations[lang].servicesSubtitle;
    }

    if (serviceTitle && translations[lang].servicesTitle) {
      serviceTitle.innerHTML = translations[lang].servicesTitle;
    }

    const serviceCardTitles = serviceSection.querySelectorAll(
      ".service-card .card-title"
    );
    const serviceKeys = [
      "serviceProductManagement",
      "serviceWebMobile",
      "serviceMarketing",
      "serviceBusinessTraining",
      "servicePrinting",
      "serviceMarketingCommunication",
      "serviceBusinessDevelopment"
    ];

    serviceCardTitles.forEach((el, idx) => {
      const key = serviceKeys[idx];
      if (translations[lang][key]) {
        el.textContent = translations[lang][key];
      }
    });

    const moreSpan = serviceSection.querySelector(".link-card .span");
    if (moreSpan && translations[lang].serviceMoreLink) {
      moreSpan.textContent = translations[lang].serviceMoreLink;
    }
  }

  // ====== Ù‚Ø³Ù… Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª (#feature) ======
  const featureSection = document.getElementById("feature");
  if (featureSection) {
    const featureSubtitle = featureSection.querySelector(".section-subtitle");
    const featureTitle = featureSection.querySelector(".section-title");

    if (featureSubtitle && translations[lang].featureSubtitle) {
      featureSubtitle.textContent = translations[lang].featureSubtitle;
    }

    if (featureTitle && translations[lang].featureTitle) {
      featureTitle.innerHTML = translations[lang].featureTitle;
    }

    const featureCards = featureSection.querySelectorAll(".feature-card");
    if (featureCards.length >= 3) {
      const [fastCard, teamCard, supportCard] = featureCards;

      const fastTitle = fastCard.querySelector(".card-title");
      const fastText = fastCard.querySelector(".card-text");
      if (fastTitle) fastTitle.textContent = translations[lang].featureFastTitle;
      if (fastText) fastText.textContent = translations[lang].featureFastText;

      const teamTitle = teamCard.querySelector(".card-title");
      const teamText = teamCard.querySelector(".card-text");
      if (teamTitle) teamTitle.textContent = translations[lang].featureTeamTitle;
      if (teamText) teamText.textContent = translations[lang].featureTeamText;

      const supportTitle = supportCard.querySelector(".card-title");
      const supportText = supportCard.querySelector(".card-text");
      if (supportTitle)
        supportTitle.textContent = translations[lang].featureSupportTitle;
      if (supportText)
        supportText.textContent = translations[lang].featureSupportText;
    }
  }

  // ====== Ù‚Ø³Ù… Ø§Ù„ØªØ³ÙˆÙŠÙ‚ / Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ (#project) ======
  const marketingSection = document.getElementById("project");
  if (marketingSection) {
    const marketingSubtitle = marketingSection.querySelector(
      ".section-subtitle"
    );
    const marketingTitle = marketingSection.querySelector(".section-title");

    if (marketingSubtitle && translations[lang].marketingSubtitle) {
      marketingSubtitle.textContent = translations[lang].marketingSubtitle;
    }

    if (marketingTitle && translations[lang].marketingTitle) {
      marketingTitle.innerHTML = translations[lang].marketingTitle;
    }

    const sliderBtns = marketingSection.querySelectorAll(".slider-btn");
    sliderBtns.forEach((btn) => {
      btn.textContent = translations[lang].marketingButton;
    });
  }

  // ====== Ù‚Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ§Ø¡ (#partners) ======
  const partnersSection = document.getElementById("partners");
  if (partnersSection) {
    const partnersSubtitle = partnersSection.querySelector(".section-subtitle");
    const partnersTitle = partnersSection.querySelector(".section-title");

    if (partnersSubtitle && translations[lang].partnersSubtitle) {
      partnersSubtitle.textContent = translations[lang].partnersSubtitle;
    }

    if (partnersTitle && translations[lang].partnersTitle) {
      partnersTitle.innerHTML = translations[lang].partnersTitle;
    }
  }

  // ====== Ø§Ù„ÙÙˆØªØ± ======
  const footer = document.querySelector(".footer");
  if (footer) {
    const footerTitles = footer.querySelectorAll(".footer-list-title");
    // 0: About, 1: Instagram post
    if (footerTitles[0]) {
      footerTitles[0].textContent = translations[lang].footerAboutTitle;
    }
    if (footerTitles[1]) {
      footerTitles[1].textContent = translations[lang].footerInstagramTitle;
    }

    const footerTextEl = footer.querySelector(".footer-text");
    if (footerTextEl && translations[lang].footerAboutText) {
      footerTextEl.textContent = translations[lang].footerAboutText;
    }

    const copyrightEl = footer.querySelector(".copyright");
    if (copyrightEl && translations[lang].footerCopyright) {
      copyrightEl.textContent = translations[lang].footerCopyright;
    }
  }

  // ====== Ø²Ø± Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø¹Ø§Ø¦Ù… (ÙˆØ§ØªØ³Ø§Ø¨ / Ø¥ÙŠÙ…ÙŠÙ„ / Ø§ØªØµØ§Ù„) ======
  const fcMenu = document.getElementById("fc-menu");
  if (fcMenu) {
    const labels = fcMenu.querySelectorAll(".fc-item span");
    const contactKeys = [
      "contactWhatsApp",
      "contactEmail",
      "contactPhone"
    ];
    labels.forEach((el, idx) => {
      const key = contactKeys[idx];
      if (translations[lang][key]) {
        el.textContent = translations[lang][key];
      }
    });
  }

  // Ø­ÙØ¸ Ø§Ù„Ù„ØºØ© ÙÙŠ localStorage
  localStorage.setItem("lang", lang);
  currentLang = lang;
}

// Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ù„ØºØ©
if (langToggleBtn) {
  langToggleBtn.addEventListener("click", () => {
    const newLang = currentLang === "ar" ? "en" : "ar";
    updateContent(newLang);
  });
}

// ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù„ØºØ© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
updateContent(currentLang);

// =========================
// Mobile nav toggle (Ù„Ùˆ Ø¹Ù†Ø¯Ùƒ Ù‚Ø§Ø¦Ù…Ø© Ù…ÙˆØ¨Ø§ÙŠÙ„ Ø«Ø§Ù†ÙŠØ©)
// =========================
const navToggle = document.getElementById("navToggle");
const mainNav = document.getElementById("mainNav");

if (navToggle && mainNav) {
  navToggle.addEventListener("click", () => {
    mainNav.classList.toggle("open");
  });
}

// =========================
// Theme toggle (Light / Dark)
// =========================
const themeToggle = document.getElementById("themeToggle");
const root = document.documentElement;

const savedTheme = localStorage.getItem("dream-theme");
if (savedTheme) root.setAttribute("data-theme", savedTheme);

if (themeToggle) {
  themeToggle.addEventListener("click", () => {
    const current =
      root.getAttribute("data-theme") === "light" ? "dark" : "light";
    root.setAttribute("data-theme", current);
    localStorage.setItem("dream-theme", current);
  });
}

// Ø³Ù†Ø© Ø§Ù„ÙÙˆØªØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ (Ù„Ùˆ Ø­Ø§Ø¨ ØªØ³ØªØ®Ø¯Ù…Ù‡Ø§ ÙÙŠ Ù…ÙƒØ§Ù† Ø¢Ø®Ø±)
const yearSpan = document.getElementById("year");
if (yearSpan) yearSpan.textContent = new Date().getFullYear();

// =========================
// Marketing Swiper (Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø±)
// =========================
const marketingSwiper = new Swiper(".marketing-slider", {
  slidesPerView: 1,
  spaceBetween: 25,
  loop: true,
  autoplay: {
    delay: 3000,
    disableOnInteraction: false
  },
  navigation: {
    nextEl: ".marketing-next",
    prevEl: ".marketing-prev"
  },
  pagination: {
    el: ".marketing-pagination",
    clickable: true
  },
  breakpoints: {
    768: { slidesPerView: 2 },
    1024: { slidesPerView: 3 }
  }
});

// === Reveal on scroll (sections animation) ===
const revealEls = document.querySelectorAll(".reveal");
if (revealEls.length && "IntersectionObserver" in window) {
  const io = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add("is-visible");
          io.unobserve(entry.target);
        }
      });
    },
    { threshold: 0.2 }
  );

  revealEls.forEach((el) => io.observe(el));
} else {
  revealEls.forEach((el) => el.classList.add("is-visible"));
}

/* === Lightbox / Image viewer (professional popup) === */
(function () {
  const lightbox = document.getElementById("lightbox");
  if (!lightbox) return;

  const lbImg = lightbox.querySelector(".lightbox__img");
  const lbCaption = lightbox.querySelector(".lightbox__caption");
  const btnClose = lightbox.querySelector(".lightbox__close");
  const btnPrev = lightbox.querySelector(".lightbox__prev");
  const btnNext = lightbox.querySelector(".lightbox__next");

  // Collect images that should open in the lightbox: images inside main article sections
  const galleryImages = Array.from(
    document.querySelectorAll("main article img")
  );
  if (galleryImages.length === 0) return;

  // Keep track of currently opened index
  let currentIndex = -1;

  function openAt(index) {
    const img = galleryImages[index];
    if (!img) return;
    currentIndex = index;
    lbImg.src = img.src;
    lbImg.alt = img.alt || "";
    lbCaption.textContent =
      img.getAttribute("data-caption") || img.alt || "";
    lightbox.classList.add("lightbox--open");
    lightbox.setAttribute("aria-hidden", "false");
    document.body.style.overflow = "hidden";
    lbImg.focus && lbImg.focus();
  }

  function close() {
    lightbox.classList.remove("lightbox--open");
    lightbox.setAttribute("aria-hidden", "true");
    document.body.style.overflow = "";
    currentIndex = -1;
  }

  function showNext() {
    if (currentIndex < 0) return;
    const next = (currentIndex + 1) % galleryImages.length;
    openAt(next);
  }

  function showPrev() {
    if (currentIndex < 0) return;
    const prev = (currentIndex - 1 + galleryImages.length) % galleryImages.length;
    openAt(prev);
  }

  // Click on images to open
  galleryImages.forEach((img, i) => {
    img.style.cursor = "zoom-in";
    img.setAttribute("tabindex", "0");
    img.addEventListener("click", (e) => {
      e.preventDefault();
      openAt(i);
    });
    img.addEventListener("keydown", (e) => {
      if (e.key === "Enter") openAt(i);
    });
  });

  // Controls
  btnClose.addEventListener("click", close);
  btnNext.addEventListener("click", showNext);
  btnPrev.addEventListener("click", showPrev);

  // Close when clicking outside image content
  lightbox.addEventListener("click", (e) => {
    if (e.target === lightbox) close();
  });

  // Keyboard navigation
  document.addEventListener("keydown", (e) => {
    if (lightbox.getAttribute("aria-hidden") === "false") {
      if (e.key === "Escape") close();
      if (e.key === "ArrowRight") showNext();
      if (e.key === "ArrowLeft") showPrev();
    }
  });

  // Preload neighbors for smoother navigation
  function preload(src) {
    const i = new Image();
    i.src = src;
  }
  const obs = new MutationObserver(() => {
    if (currentIndex >= 0) {
      const next = (currentIndex + 1) % galleryImages.length;
      const prev = (currentIndex - 1 + galleryImages.length) % galleryImages.length;
      preload(galleryImages[next].src);
      preload(galleryImages[prev].src);
    }
  });
  obs.observe(lightbox, { attributes: true, attributeFilter: ["class"] });
})();

// Floating Contact Menu
const fcToggle = document.getElementById("fc-toggle");
const fcMenu = document.getElementById("fc-menu");

if (fcToggle && fcMenu) {
  fcToggle.addEventListener("click", () => {
    fcMenu.classList.toggle("show");
  });

  // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø®Ø§Ø±Ø¬Ù‡Ø§
  document.addEventListener("click", (e) => {
    if (!fcToggle.contains(e.target) && !fcMenu.contains(e.target)) {
      fcMenu.classList.remove("show");
    }
  });
}
